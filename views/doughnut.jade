extends layout

block content
    .page
        .pageHeading
            span.heading doughnut
            span.subheading
                a(href="calendar").link Today
                    span.glyphicon.glyphicon-chevron-right
        .pageContent
            canvas#canvas(height="500px", width="500px")
            table.table.table-condensed.table-striped#doughnutTable
                tr
                    td
                        .color(style='background-color: #F7464A;')
                    td.percent 10%
                    td.category Exercise
                    td.category.Ta-start
                        a(href="details?category=exercise").link
                            span.glyphicon.glyphicon-list.iconLink
                tr
                    td
                        .color(style='background-color: #46BFBD;')
                    td.percent 21%
                    td.category Fun
                    td.category.Ta-start
                        a(href="details?category=fun").link
                            span.glyphicon.glyphicon-list.iconLink
                tr
                    td
                        .color(style='background-color: #FDB45C;')
                    td.percent 32%
                    td.category Family
                    td.category.Ta-start
                        a(href="details?category=family").link
                            span.glyphicon.glyphicon-list.iconLink
                tr
                    td
                        .color(style='background-color: #949FB1;')
                    td.percent 12%
                    td.category Job
                    td.category.Ta-start
                        a(href="details?category=job").link
                            span.glyphicon.glyphicon-list.iconLink
                tr
                    td
                        .color(style='background-color: #4D5360;')
                    td.percent 34%
                    td.category School
                    td.category.Ta-start
                        a(href="details?category=family").link
                            span.glyphicon.glyphicon-list.iconLink



    script.
        var doughnutData = [
                {
                    value: 30,
                    color:"#F7464A"
                },
                {
                    value : 50,
                    color : "#46BFBD"
                },
                {
                    value : 100,
                    color : "#FDB45C"
                },
                {
                    value : 40,
                    color : "#949FB1"
                },
                {
                    value : 120,
                    color : "#4D5360"
                }
            
            ];

        var myDoughnut = new Chart(document.getElementById("canvas").getContext("2d")).Doughnut(doughnutData);

        var canvas = document.querySelector('canvas');
        var ctx = canvas.getContext('2d');

        function resize() {
            // Our canvas must cover full height of screen
            // regardless of the resolution
            var width = window.innerWidth - 50;
            
            // So we need to calculate the proper scaled width
            // that should work well with every resolution
            var ratio = canvas.height/canvas.width;
            var height = width * ratio;

            if (width > 500 || height > 500) {
                width = 500;
                height = 500;
            }
            
            canvas.style.width = width+'px';
            canvas.style.height = height+'px';
        }

        window.addEventListener('load', resize, false);
        window.addEventListener('resize', resize, false);